# 🚀 啟動服務並測試完整指南

## ✅ **服務狀態**

目前服務應該已經在運行：
- 🟢 **後端**: `http://localhost:3001`
- 🟢 **前端**: `http://localhost:5175`

---

## 📋 **快速測試步驟**

### **步驟 1：開啟瀏覽器**
```
訪問: http://localhost:5175
```

### **步驟 2：清除快取（重要！）**
```
按下鍵盤快捷鍵：
- Windows/Linux: Ctrl + Shift + R
- Mac: Cmd + Shift + R
```

### **步驟 3：登入系統**
```
如果已有帳號：
- 輸入您的帳號密碼登入

如果沒有帳號：
1. 點擊「註冊」
2. 填寫資料：
   - 使用者名稱: testuser (只能字母、數字、底線)
   - 電子郵件: test@example.com
   - 密碼: password123 (至少6個字元)
3. 註冊後自動登入
```

### **步驟 4：測試地圖功能**

#### **測試 A：新增地點**
```
1. 點擊「新增地點」按鈕
2. 填寫表單：
   地點名稱: 台北101
   描述: 台北最高的地標
   地址: 台北市信義區信義路五段7號
3. 點擊「獲取座標」→ 等待成功訊息
4. 選擇分類: 景點
5. 選擇評分: 5星
6. 點擊「儲存」
```

#### **測試 B：查看地點詳情的地圖**
```
1. 在地點列表中找到「台北101」
2. 點擊「查看詳情」
3. 滾動到地址區塊下方
4. ✅ 應該看到 Google Maps 地圖
5. ✅ 地圖上有一個紅色標記
6. 點擊標記 → 應該顯示地點名稱和描述
```

#### **測試 C：地點列表的地圖總覽**
```
1. 點擊「返回列表」
2. ✅ 看到搜尋欄右側有三個按鈕
3. ✅ 預設顯示「地圖+列表」模式
4. ✅ 地圖上顯示所有地點的標記

測試視圖切換：
- 點擊第一個按鈕（📋）→ 只顯示列表
- 點擊第二個按鈕（📋🗺️）→ 顯示地圖+列表
- 點擊第三個按鈕（🗺️）→ 只顯示地圖
```

#### **測試 D：標記點擊互動**
```
1. 在地圖模式下
2. 點擊地圖上的標記
3. ✅ 應該顯示 InfoWindow（資訊氣泡）
4. ✅ 自動跳轉到該地點的詳情頁
```

#### **測試 E：搜尋與地圖聯動**
```
1. 在搜尋欄輸入「台北」
2. ✅ 地圖只顯示包含「台北」的地點
3. ✅ 列表卡片也同步篩選
4. 清除搜尋
5. ✅ 所有標記恢復顯示
```

---

## 🐛 **常見問題排除**

### **問題 1：看不到地圖？**

**檢查 Console (F12)：**
```
如果看到 "Google Maps API Key 未設定" 錯誤：
→ 檢查 frontend/.env 檔案

如果看到 "Google Maps API 載入失敗" 錯誤：
→ 檢查網路連線
→ 檢查 API Key 是否有效
```

**解決方案：**
```bash
# 確認 .env 檔案存在
cat frontend/.env

# 應該看到：
# VITE_GOOGLE_MAPS_JS_KEY=你的API金鑰
# VITE_API_BASE_URL=http://localhost:3001
```

### **問題 2：地圖顯示灰色或空白？**

**可能原因：**
1. API Key 無效
2. API Key 沒有啟用 Maps JavaScript API
3. API Key 有域名限制（localhost 應該沒問題）

**解決方案：**
```
1. 訪問 Google Cloud Console
2. 確認 Maps JavaScript API 已啟用
3. 確認 API Key 沒有 HTTP referrer 限制
4. 或者在限制中添加 http://localhost:5175/*
```

### **問題 3：後端連接失敗？**

**檢查後端狀態：**
```bash
# 測試後端健康狀態
curl http://localhost:3001/health
```

**如果沒有回應：**
```bash
# 重啟後端
cd backend
npm run dev
```

### **問題 4：前端頁面空白？**

**解決方案：**
```
1. 清除瀏覽器快取 (Ctrl+Shift+R)
2. 檢查 Console 錯誤
3. 確認前端服務正在運行
```

**重啟前端：**
```bash
# 停止前端
pkill -f "vite"

# 重新啟動
cd frontend
npm run dev
```

---

## 🔧 **手動啟動服務（如果需要）**

### **如果服務停止了，手動重啟：**

#### **啟動後端：**
```bash
# 新開一個終端機視窗
cd /Users/fffuuuming/Desktop/study/master/master_2_2/wp/wp1141/hw4/backend
npm run dev

# 應該看到：
# ✓ 資料庫連接成功
# ✓ 資料表初始化成功
# 🚀 伺服器運行在 http://localhost:3001
```

#### **啟動前端：**
```bash
# 新開另一個終端機視窗
cd /Users/fffuuuming/Desktop/study/master/master_2_2/wp/wp1141/hw4/frontend
npm run dev

# 應該看到：
# VITE v7.x.x ready in xxx ms
# ➜ Local: http://localhost:5175/
```

---

## 📊 **完整功能測試清單**

### **基本功能：**
- [ ] 使用者註冊
- [ ] 使用者登入
- [ ] 新增地點
- [ ] 地址轉座標
- [ ] 查看地點列表
- [ ] 搜尋地點
- [ ] 查看地點詳情
- [ ] 編輯地點
- [ ] 刪除地點
- [ ] 使用者登出

### **地圖功能：**
- [ ] 詳情頁面顯示地圖
- [ ] 地圖上顯示標記
- [ ] 點擊標記顯示 InfoWindow
- [ ] 列表頁面顯示地圖總覽
- [ ] 地圖顯示所有地點標記
- [ ] 視圖模式切換（列表/地圖/兩者）
- [ ] 點擊標記跳轉到詳情頁
- [ ] 搜尋與地圖聯動
- [ ] 地圖自動適配視野

---

## 💡 **測試建議**

### **建議測試順序：**
1. ✅ 先測試基本 CRUD 功能
2. ✅ 確認資料可以正常新增/編輯/刪除
3. ✅ 再測試地圖功能
4. ✅ 測試地圖互動功能
5. ✅ 測試視圖切換和搜尋聯動

### **建議測試資料：**
```
新增以下地點來測試地圖功能：

1. 台北101
   地址: 台北市信義區信義路五段7號
   分類: 景點
   評分: 5星

2. 故宮博物院
   地址: 台北市士林區至善路二段221號
   分類: 博物館
   評分: 5星

3. 星巴克典藏門市
   地址: 台北市信義區松仁路28號1樓
   分類: 咖啡廳
   評分: 4星
```

### **多個地點可以測試：**
- 地圖自動調整視野包含所有標記
- 點擊不同標記的互動
- 搜尋篩選時地圖的更新

---

## 🎯 **測試完成標準**

當您完成以下測試，即代表系統運作正常：

### **階段一 CRUD 功能：**
- ✅ 可以新增地點
- ✅ 可以查看地點列表和詳情
- ✅ 可以編輯地點
- ✅ 可以刪除地點
- ✅ 搜尋功能正常

### **階段二 地圖功能：**
- ✅ 詳情頁面地圖正常顯示
- ✅ 列表頁面地圖總覽正常顯示
- ✅ 標記正確顯示在地圖上
- ✅ 點擊標記可以查看詳情
- ✅ 視圖切換正常運作
- ✅ 搜尋與地圖聯動正常

### **使用者體驗：**
- ✅ 沒有 Console 錯誤
- ✅ 載入狀態正常顯示
- ✅ 錯誤訊息清楚明確
- ✅ 成功訊息正常顯示
- ✅ 頁面導航流暢

---

## 📚 **相關文檔**

- 📖 [CRUD 測試指南](./CRUD_TESTING_GUIDE.md)
- 📖 [Google Maps 測試指南](./GOOGLE_MAPS_TESTING_GUIDE.md)
- 📖 [Google Maps 修復說明](./GOOGLE_MAPS_FIX.md)
- 📖 [快速測試指南](./QUICK_TEST_GUIDE.md)
- 📖 [手動測試指南](./MANUAL_TESTING_GUIDE.md)

---

## 🎉 **開始測試吧！**

現在服務應該都在運行了：
- 🟢 後端: http://localhost:3001
- 🟢 前端: http://localhost:5175

**請訪問前端網址並開始測試！** 🚀✨

有任何問題隨時告訴我！

